# 6장 프로토타입

## 프로토타입이란?
- 어떤 객체를 원형으로 삼고, 이를 복제(참조) 함으로써 상속과 비슷한 효과를 얻음
- 자바스크립트는 프로토타입(prototype) 기반 언어임. <br> 유명한 프로그래밍 언어의 상당수가 클래스 기반인 것에 비교하면 독특한 개념.

## 프로토타입의 개념 이해
- **constructor** : 객체를 생성하고 초기화하는 함수, new 연산자와 함께 호출됨.
- **prototype** : 모든 객체들이 메소드와 속성들을 상속받기 위한 템플릿으로서 가지는 객체
- **instance** :  생성자 함수(constructor)에 의해 생성된 객체

### 프로토타입 도식화
<img width="553" src="https://github.com/user-attachments/assets/cd4e5ec1-a85f-49da-af9f-af0c3e064728">
1. 어떤 생성자 함수(constructor)를 new 연산자와 함께 호출하면 새로운 인스턴스(instance)가 생성됨.
2. 새로운 인스턴스가 생성될 때, 해당 인스턴스에는 __proto__라는 프로퍼티가 자동으로 부여됨.
3. __proto__ 프로퍼티는 생성자의 prototype 프로퍼티를 참조함.
    - constructor.prototype과 인스턴스의 __proto__는 같은 객체를 바라보기 때문.
4. prototype과 __proto__는 모두 객체이며, prototype 객체 내부에는 인스턴스가 사용할 메서드와 속성이 정의되어 있음.<br> 따라서, 인스턴스는 숨겨진 프로퍼티인 __proto__를 통해 prototype 객체에 접근하고, 이로 인해 메서드와 속성을 사용할 수 있다.
+) 실무에서는 __proto__ 대신 Object.getPrototypeOf() 또는 Object.create()를 사용하는 것이 권장됨.

### 예제로 보는 프로토타입
```javascript
// 인스턴스에서 메서드에 접근 가능할까? - 예 

var Person = function (name) {
    this._name = name;
};

Person.prototype.getName = function () { 
    return this._name; // ya.__proto__ 객체를 가리킴
};

var ya = new Person('YA');
// 인스턴스에서 __proto__를 통해  메서드에 접근 
console.log(ya.__proto__.getName()); //결과 :  undefined  // 실행할 수 없는, 함수가 아닌 데이터 타입이였다면 TypeError이 발생했을 것
```

```javascript
// 위 예제의 결과가  undefined 인 이유는? - this 바인딩의 대상이 잘못된 코드이기 때문.

// Person.prototype에 _name 속성을 추가해 this 바인딩을 올바르게 설정한 코드
var ya = new Person('YA');
ya.__proto__._name = 'ya__proto__';
console.log(ya.__proto__.getName());  //결과 :  ya__proto__
```
코드1 : this가 ya.__proto__를 가리키는 상황에서 바인딩됨. 그런데, __proto__에는 _name 속성이 존재하지 않아 undefined를 반환함.
코드2 :getName 메서드는 Person 인스턴스의 _name 속성을 반환하도록 설계되었지만, __proto__를 통해 호출되었기 때문에 this는 ya.__proto__를 참조하게 되었다.

### 예제로 보는 프로토타입(array)
- JavaScript에서 배열은 기본적으로 Array 생성자 함수에 의해 생성됨.
- 그러나 literal로 생성한 배열이든 array 생성자 함수를 생성한 배열이든 내부 구조는 모두 array 생성자 함수를 생성한 것과 동일하게 동작함.배열이 Array.prototype에 정의된 메서드와 속성들을 상속받기 때문.


### constructor 프로퍼티
- 생성자 함수의 prototype에 어떤 메서드나 프로퍼티가 있다면 인스턴스에서도 마치 자신의 것처럼 해당 메서드나 프로퍼티에 접근 할 수 있음

## 프로토타입체인
- JavaScript에서 객체는 자신의 프로토타입 객체를 __proto__ 프로퍼티로 참조함

### 메서드 오버라이트
- JavaScript에서 인스턴스나 프로토타입 객체에 동일한 이름의 메서드를 정의하면, 기존의 메서드를 덮어씀

### 프로토타입 체인
- 인스턴스 객체는 자신의 __proto__를 통해 부모 객체의 프로토타입에 접근할 수 있으며, 이 체인을 따라 계속 상위 객체로 접근해 가며 최종적으로 Object.prototype에 도달함.

### 객체 전용 메서드의 예외사항
- 프로토타입 체인을 이용하면 상속된 메서드를 덮어쓸 수도 있음

### 다중 프로토타입 체인
- JavaScript는 다중 상속을 지원하지 않지만, 프로토타입 체인을 통해 다중 프로토타입의 효과를 구현할 수 있음
- 체는 여러 프로토타입 객체에서 메서드나 속성을 상속받을 수 있음

## 정리

- 생성자 함수와 함께 인스턴스가 생성되면, 해당 인스턴스는 생성자 함수의 prototype을 참조하는 proto 속성을 가짐.

- **프로토타입**: 생성자 함수에서 정의된 내용에 기반하여 생성된 인스턴스 객체가 가지는 특별한 속성으로, 이 속성은 인스턴스가 생성자 함수의 prototype 객체를 참조하도록 함.

- **프로토타입 체인**: 인스턴스 객체는 자신의 __proto__를 통해 부모 객체의 프로토타입에 접근할 수 있으며, 이 체인을 따라 계속 상위 객체로 접근해 가며 최종적으로 Object.prototype에 도달함.
- 프로토타입 체인은 무한히 확장될 수 있지만, 최종적으로 Object.prototype에서 멈추게 됨.



책과 함께 읽어 본 것들
mdn
https://taenami.tistory.com/116

